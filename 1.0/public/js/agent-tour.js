function getPrice(t,e){var a=t.id.charAt(0),r="0";if("public(2h)"==$("#tour_type").val()?r="0":"private(2h)"==$("#tour_type").val()?r="1":"private(3h)"==$("#tour_type").val()&&(r="2"),a!=r)return $(t).notify("Please choose tour type first",{position:"right middle",autoHideDelay:2e3}),!1;for(j=0;j<3;j++)for(i=0;i<=bikes.length;i++){o="#"+j+i;$(o).css("background-color","white")}for(i=0;i<=bikes.length;i++){var o="#"+a+i;$(o).css("background-color","#rgb(232, 232, 232);")}var n=e+"_tour";$(n).val()<=19&&$(n).val(parseInt($(n).val())+1),calculate()}function goBack(){var t=0;for("public(2h)"==$("#tour_type").val()?t=0:"private(2h)"==$("#tour_type").val()?t=1:"private(3h)"==$("#tour_type").val()&&(t=2),j=0;j<=2;j++)for(i=0;i<=bikes.length;i++){e="#"+j+i;$(e).css("background-color","white")}for(i=0;i<=bikes.length;i++){var e="#"+t+i;$(e).css("background-color","#rgb(232, 232, 232)")}}function calculate(){var t=0;"public(2h)"==$("#tour_type").val()?t=0:"private(2h)"==$("#tour_type").val()?t=1:"private(3h)"==$("#tour_type").val()&&(t=2);var e=0,a=0;for(i=1;i<=bikes.length;i++)e+=parseInt($(bikes[i-1]).val()*$("#"+t+i).val()),a+=parseInt($(bikes[i-1]).val());e+=parseInt($("#basket_tour").val()),1==$("#tour_coupon").prop("checked")&&(e=0,e+=parseFloat($("#basket_tour").val())),1==$("#insurance").prop("checked")&&(e+=2*a),e-=originalPriceBefore,totalsum=e,numOrPercent&&$("#rent_adjust").val().trim().length>=1&&(e=parseFloat($("#rent_adjust").val()),e+=parseInt($("#basket_tour").val()),1==$("#insurance").prop("checked")&&(e+=2*a)),numOrPercent||(1==$("#insurance").prop("checked")&&(e-=2*a),e-=parseFloat($("#basket_tour").val()),$("#rent_discount").val().trim().length>=1&&(e*=1-.01*parseFloat($("#rent_discount").val()),$("#rent_adjust").val(e.toFixed(2)),console.log("that: "+e)),1==$("#insurance").prop("checked")&&(e+=2*a),e+=parseFloat($("#basket_tour").val())),console.log("this: "+e),total_bikeNum=a,$("#rent_total_label").val(e.toFixed(2)).css("color","green"),1==$("#tour_coupon").prop("checked")?($("#rent_tax").val(0).css("color","green"),$("#rent_total_after_tax").val((1*e).toFixed(2)).css("color","green")):($("#rent_tax").val((e*(tax-1)).toFixed(2)).css("color","green"),$("#rent_total_after_tax").val((e*tax).toFixed(2)).css("color","green")),$("#rent_rendered").val($("#rent_total_after_tax").val()).css("color","green")}function ccSubmitCheck(){if(!checkName())return!1;if(!checkBikeNum())return!1;if(!checkValid())return!1;var t=/^(0\.[1-9]|[1-9][0-9]{0,2}(\.[0-9]{0,2})?)$/;return!!$("#rent_total_label").val().match(t)||($("#rent_total_label").notify("Please input valid price",{position:"right middle"}),!1)}function cashSubmitCheck(){return!!checkName()&&(!!checkBikeNum()&&(!!checkValid()&&(!!checkRenderedCash()&&void 0)))}function checkName(){return $("#tour_customer_first").val().length<=0?($("#tour_customer_first").notify("Please input valid name",{position:"bottom center",autoHideDelay:2e3}),!1):!($("#tour_customer_last").val().length<=0)||void $("#tour_customer_last").notify("Please input valid name",{position:"bottom center",autoHideDelay:2e3})}function checkBikeNum(){return 0!=$("#adult_tour").val()||0!=$("#child_tour").val()||($("#child_tour_label").notify("Tour number can't be 0",{position:"right bottom",autoHideDelay:2e3}),!1)}function checkValid(){var t=/^\d+$/,e=/^\d{2}[/]\d{2}[/]\d{4}$/,a=/^-?\d*(\.\d+)?$/;return $("#adult_tour").val().match(t)&&$("#child_tour").val().match(t)?$("#tour_date").val().match(e)?$("#rent_adjust").val().match(a)?!!$("#rent_rendered").val().match(a)||($("#rent_rendered").notify("Please input valid number",{position:"top right"}),!1):($("#rent_adjust").notify("Please input valid number",{position:"top right"}),!1):($("#tour_date").notify("Please input valid date",{position:"top center",autoHideDelay:2e3}),!1):($("#child_tour_label").notify("Please input valid number",{position:"right bottom",autoHideDelay:2e3}),!1)}function checkRenderedCash(){if($("#rent_rendered").val().length<=0)return $("#rent_rendered").notify("Cash is not enough",{position:"top right"}),!1;if($("#rent_adjust").val().length>0){if(parseFloat($("#rent_adjust").val())>parseFloat($("#rent_rendered").val()))return $("#rent_rendered").notify("Cash is not enough",{position:"top right"}),!1}else if(parseFloat($("#rent_total_after_tax").val())>parseFloat($("#rent_rendered").val()))return $("#rent_rendered").notify("Cash is not enough",{position:"top right"}),!1;return!0}var totalsum,tax=1.08875,total_bikeNum;$(function(){for($(".field").keyup(function(){calculate()}),$(".ui-spinner-button").click(function(){console.log("Handler for .change() called."),calculate()}),i=0;i<=bikes.length;i++){var t="#0"+i;$(t).css("background-color","#rgb(232, 232, 232);")}$(".tour-title").click(function(){$("#tour_type").val(this.value);var t=this.id.charAt(0);for(j=0;j<=2;j++)for(i=0;i<=bikes.length;i++){e="#"+j+i;$(e).css("background-color","white")}for(i=0;i<=bikes.length;i++){var e="#"+t+i;$(e).css("background-color","#rgb(232, 232, 232);")}calculate()}),$("#cash_paid_label").keyup(function(){var t=parseFloat($("#cash_paid_label").val()),e=parseFloat($("#tour_tips").val());t>=e&&$("#cash_change_label").val((t-e).toFixed(2)).css("color","green")}),$("#tour_type").change(function(){for(j=0;j<=2;j++)for(i=0;i<=bikes.length;i++){e="#"+j+i;$(e).css("background-color","white")}var t="0";for("public(2h)"==$("#tour_type").val()?t="0":"private(2h)"==$("#tour_type").val()?t="1":"private(3h)"==$("#tour_type").val()&&(t="2"),i=0;i<=bikes.length;i++){var e="#"+t+i;$(e).css("background-color","#rgb(232, 232, 232)")}calculate()}),goBack(),$("#rent_rendered").focus(function(){"0"==$("#rent_rendered").val()&&$("#rent_rendered").val(null)}),$("#rent_rendered").keyup(function(){if($("#rent_rendered").val()){var t=parseFloat($("#rent_rendered").val()),e=parseFloat($("#rent_total_after_tax").val());t>=e?$("#rent_change").val((t-e).toFixed(2)):$("#rent_change").val(null)}else $("#rent_change").val(null)}),$("#rent_adjust").keyup(function(){numOrPercent=!0,$("#rent_adjust").val()?($("#rent_discount").val((100*(1-parseFloat($("#rent_adjust").val())/parseFloat(totalsum))).toFixed(0)),$("#rent_total_label").val($("#rent_adjust").val())):$("#rent_discount").val(null),calculate()}),$("#rent_discount").keyup(function(){if(numOrPercent=!1,$("#rent_discount").val()){var t=0;for(i=0;i<bikes.length;i++)t+=parseInt($(bikes[i]).val());var e=totalsum/tax;1==$("#insurance").prop("checked")&&(e-=2*t);var a=e-=parseFloat($("#basket_bike").val());$("#rent_adjust").val(((1-.01*parseFloat($("#rent_discount").val()))*parseFloat(a)).toFixed(2))}else $("#rent_adjust").val(null);calculate()}),$("#tour_agent").autocomplete({source:agentList}),$("#tour_agent").keyup(function(){$("#tour_agent_level").val(agentListMap.get($("#tour_agent").val()))}),$("#tour_agent").focusout(function(){$("#tour_agent_level").val(agentListMap.get($("#tour_agent").val()))}),$("#insurance").click(function(){calculate()}),$("#tour_coupon").click(function(){calculate()}),$('[name="cash"]').click(function(){$("form").attr("target","_self")})});var bikes=["#adult_tour","#child_tour"],numOrPercent=!1;